<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JH-Toolkit: jh::async::fiber::promise_type Struct Reference</title>
<link rel="icon" href="Jindallae.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Oree.svg"/></td>
  <td id="projectalign">
   <div id="projectname">JH-Toolkit<span id="projectnumber">&#160;v1.4.0</span>
   </div>
   <div id="projectbrief">An engineering-oriented C++20 toolkit with duck-typed concepts, static design, async coroutines, and semantic containers — header-only, RTTI-free, and concurrency-friendly.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('structjh_1_1async_1_1fiber_1_1promise__type.html','','structjh_1_1async_1_1fiber_1_1promise__type-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">jh::async::fiber::promise_type Struct Reference<span class="mlabels"><span class="mlabel final">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="">jh/asynchronous/fiber.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a08e3edd050f952cf762846ef5c32b52b" id="r_a08e3edd050f952cf762846ef5c32b52b"><td class="memItemLeft"><a class="el" href="classjh_1_1async_1_1fiber.html#a0d9eb73eb77fb819b3668d305d45bf45">fiber</a>&#160;</td><td class="memItemRight"><a class="el" href="#a08e3edd050f952cf762846ef5c32b52b">get_return_object</a> ()</td></tr>
<tr class="memdesc:a08e3edd050f952cf762846ef5c32b52b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and returns the generator object.  <br /></td></tr>
<tr class="memitem:a59a1097faea0e4d0acc204e0eff1c217" id="r_a59a1097faea0e4d0acc204e0eff1c217"><td class="memItemLeft">std::suspend_always&#160;</td><td class="memItemRight"><a class="el" href="#a59a1097faea0e4d0acc204e0eff1c217">initial_suspend</a> () noexcept</td></tr>
<tr class="memdesc:a59a1097faea0e4d0acc204e0eff1c217"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution initially.  <br /></td></tr>
<tr class="memitem:a1cc5163fba42c9e6c9e4bbf298408c29" id="r_a1cc5163fba42c9e6c9e4bbf298408c29"><td class="memItemLeft">std::suspend_always&#160;</td><td class="memItemRight"><a class="el" href="#a1cc5163fba42c9e6c9e4bbf298408c29">final_suspend</a> () noexcept</td></tr>
<tr class="memdesc:a1cc5163fba42c9e6c9e4bbf298408c29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspends execution at the final stage.  <br /></td></tr>
<tr class="memitem:abffd0f2daf7d7b19497df079608c1bac" id="r_abffd0f2daf7d7b19497df079608c1bac"><td class="memItemLeft"><a id="abffd0f2daf7d7b19497df079608c1bac" name="abffd0f2daf7d7b19497df079608c1bac"></a>
void&#160;</td><td class="memItemRight"><b>return_void</b> () noexcept</td></tr>
<tr class="memdesc:abffd0f2daf7d7b19497df079608c1bac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates normal completion of the coroutine. <br /></td></tr>
<tr class="memitem:aa2d92074ef81a4f4af17ae377e3cd50c" id="r_aa2d92074ef81a4f4af17ae377e3cd50c"><td class="memItemLeft">void&#160;</td><td class="memItemRight"><a class="el" href="#aa2d92074ef81a4f4af17ae377e3cd50c">unhandled_exception</a> ()</td></tr>
<tr class="memdesc:aa2d92074ef81a4f4af17ae377e3cd50c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles uncaught exceptions inside the coroutine.  <br /></td></tr>
<tr class="memitem:a79ad9f2621552f875c199695f25caca0" id="r_a79ad9f2621552f875c199695f25caca0"><td class="memItemLeft">auto&#160;</td><td class="memItemRight"><a class="el" href="#a79ad9f2621552f875c199695f25caca0">await_transform</a> (<a class="el" href="structjh_1_1async_1_1resume__t.html">resume_t</a>) noexcept</td></tr>
<tr class="memdesc:a79ad9f2621552f875c199695f25caca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms <code>co_await resume_tag</code> into an awaiter.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><h4>Promise Type</h4>
<p>The <code><a class="el" href="structjh_1_1async_1_1fiber_1_1promise__type.html">promise_type</a></code> defines the coroutine state and lifecycle underlying a <code>fiber</code>. It provides the suspension hooks required to construct, start, pause, and finalize the coroutine, and enforces the <b>no-exception</b> execution model.</p>
<p>A <code>fiber</code> does not propagate exceptions. Any uncaught exception is treated as a fatal error and results in <code>std::terminate()</code>, mirroring the behavior of a thread whose entry function throws without being caught. This prevents the coroutine from continuing after a corrupted state.</p>
<h5>Responsibilities</h5>
<ul>
<li>
Construct and return the bound <code>fiber</code> object. </li>
<li>
Provide suspension points at coroutine start and completion. </li>
<li>
Enforce the rule that the coroutine body must not allow exceptions to escape. </li>
<li>
Transform <code>co_await resume_tag</code> into a passive suspension awaiter. </li>
</ul>
<h5>Coroutine Lifecycle Hooks</h5>
<ul>
<li>
<code><a class="el" href="#a08e3edd050f952cf762846ef5c32b52b" title="Creates and returns the generator object.">get_return_object()</a></code> — constructs the associated <code>fiber</code>. </li>
<li>
<code><a class="el" href="#a59a1097faea0e4d0acc204e0eff1c217" title="Suspends execution initially.">initial_suspend()</a></code> — suspends before first execution step. </li>
<li>
<code><a class="el" href="#a1cc5163fba42c9e6c9e4bbf298408c29" title="Suspends execution at the final stage.">final_suspend()</a></code> — suspends after completion to ensure safe destruction. </li>
<li>
<code><a class="el" href="#abffd0f2daf7d7b19497df079608c1bac" title="Indicates normal completion of the coroutine.">return_void()</a></code> — indicates successful completion without a return value. </li>
<li>
<code><a class="el" href="#aa2d92074ef81a4f4af17ae377e3cd50c" title="Handles uncaught exceptions inside the coroutine.">unhandled_exception()</a></code> — aborts the program via <code>std::terminate()</code>. </li>
</ul>
<h5>Awaiter Mechanism</h5>
<p>The expression <code>co_await resume_tag</code> produces a simple awaiter that behaves like a controlled suspension point. It performs no scheduling, does not enqueue work, and resumes only when the outer <code><a class="el" href="classjh_1_1async_1_1fiber.html#ad37de47abf93ac939f7f5a62676ccc6b" title="Resumes execution of the fiber.">resume()</a></code> method is called. </p>
<ul>
<li>
<code>await_ready()</code> — always returns <code>false</code>. </li>
<li>
<code>await_suspend()</code> — performs no action. </li>
<li>
<code>await_resume()</code> — no-op. </li>
</ul>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a79ad9f2621552f875c199695f25caca0" name="a79ad9f2621552f875c199695f25caca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79ad9f2621552f875c199695f25caca0">&#9670;&#160;</a></span>await_transform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto jh::async::fiber::promise_type::await_transform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjh_1_1async_1_1resume__t.html">resume_t</a></td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transforms <code>co_await resume_tag</code> into an awaiter. </p>
<p>This awaiter introduces a controlled suspension point similar to <code>condition_variable.wait()</code>. The awaiter: </p><ul>
<li>
always suspends, </li>
<li>
performs no scheduling, </li>
<li>
resumes only when <code><a class="el" href="classjh_1_1async_1_1fiber.html#ad37de47abf93ac939f7f5a62676ccc6b" title="Resumes execution of the fiber.">fiber.resume()</a></code> is called. </li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>A lightweight awaiter object. </dd></dl>
<p>Indicates that suspension is always required. </p><dl class="section return"><dt>Returns</dt><dd>Always <code>false</code>.</dd></dl>
<p>Performs no action during suspension.</p>
<p>No-op resume handler.</p>

</div>
</div>
<a id="a1cc5163fba42c9e6c9e4bbf298408c29" name="a1cc5163fba42c9e6c9e4bbf298408c29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cc5163fba42c9e6c9e4bbf298408c29">&#9670;&#160;</a></span>final_suspend()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::suspend_always jh::async::fiber::promise_type::final_suspend </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Suspends execution at the final stage. </p>
<dl class="section return"><dt>Returns</dt><dd>Always returns <code>std::suspend_always</code> to suspend execution at the end. </dd></dl>

</div>
</div>
<a id="a08e3edd050f952cf762846ef5c32b52b" name="a08e3edd050f952cf762846ef5c32b52b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08e3edd050f952cf762846ef5c32b52b">&#9670;&#160;</a></span>get_return_object()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjh_1_1async_1_1fiber.html#a0d9eb73eb77fb819b3668d305d45bf45">fiber</a> jh::async::fiber::promise_type::get_return_object </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates and returns the generator object. </p>
<dl class="section return"><dt>Returns</dt><dd>A fiber instance bound to this coroutine promise. </dd></dl>

</div>
</div>
<a id="a59a1097faea0e4d0acc204e0eff1c217" name="a59a1097faea0e4d0acc204e0eff1c217"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59a1097faea0e4d0acc204e0eff1c217">&#9670;&#160;</a></span>initial_suspend()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::suspend_always jh::async::fiber::promise_type::initial_suspend </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Suspends execution initially. </p>
<dl class="section return"><dt>Returns</dt><dd>Always returns <code>std::suspend_always</code> to suspend execution at the start. </dd></dl>

</div>
</div>
<a id="aa2d92074ef81a4f4af17ae377e3cd50c" name="aa2d92074ef81a4f4af17ae377e3cd50c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d92074ef81a4f4af17ae377e3cd50c">&#9670;&#160;</a></span>unhandled_exception()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jh::async::fiber::promise_type::unhandled_exception </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles uncaught exceptions inside the coroutine. </p>
<p>Fiber execution does not propagate exceptions; any uncaught error causes <code>std::terminate()</code>, matching the behavior of an OS thread whose entry function throws without being caught. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>include/jh/asynchronous/<a class="el" href="">fiber.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
</div> <!-- top -->
<hr class="footer"/>
<div class="footer">
    <img class="footer-logo" src="Ojing.svg" alt="Ojing"/>
    <div class="footer-text">
        JH-Toolkit v1.4.0 · Generated by Doxygen
    </div>
    <div class="footer-note">
        We primarily support embedded documentation views in IDEs (classic CLion).
        To ensure compatibility with embedded rendering, some example code in this
        documentation intentionally contains HTML entities.
        In certain cases, Doxygen does not unescape these entities correctly.
        This is a known limitation and currently has no workaround.
    </div>
</div>
</body>
</html>
