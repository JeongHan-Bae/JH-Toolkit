<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JH-Toolkit: include/jh/synchronous/ipc/process_launcher.h File Reference</title>
<link rel="icon" href="Jindallae.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Oree.svg"/></td>
  <td id="projectalign">
   <div id="projectname">JH-Toolkit<span id="projectnumber">&#160;v1.4.0</span>
   </div>
   <div id="projectbrief">An engineering-oriented C++20 toolkit with duck-typed concepts, static design, async coroutines, and semantic containers — header-only, RTTI-free, and concurrency-friendly.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('process__launcher_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">process_launcher.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Cross-platform process launcher aligned with std::thread semantics.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="">jh/macros/platform.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="">jh/metax/t_str.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="">jh/synchronous/ipc/ipc_limits.h</a>&quot;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;stdexcept&gt;</code><br />
<code>#include &lt;filesystem&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:jh_3A_3Async_3A_3Aipc_3A_3Aprocess_5Flauncher_3C_20Path_2C_20IsBinary_20_3E" id="r_jh_3A_3Async_3A_3Aipc_3A_3Aprocess_5Flauncher_3C_20Path_2C_20IsBinary_20_3E"><td class="memItemLeft">class &#160;</td><td class="memItemRight"><a class="el" href="classjh_1_1sync_1_1ipc_1_1process__launcher.html">jh::sync::ipc::process_launcher&lt; Path, IsBinary &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cross-platform process launcher.  <a href="classjh_1_1sync_1_1ipc_1_1process__launcher.html#details">More...</a><br /></td></tr>
<tr class="memitem:jh_3A_3Async_3A_3Aipc_3A_3Aprocess_5Flauncher_3C_20Path_2C_20IsBinary_20_3E_3A_3Ahandle" id="r_jh_3A_3Async_3A_3Aipc_3A_3Aprocess_5Flauncher_3C_20Path_2C_20IsBinary_20_3E_3A_3Ahandle"><td class="memItemLeft">struct &#160;</td><td class="memItemRight"><a class="el" href="structjh_1_1sync_1_1ipc_1_1process__launcher_1_1handle.html">jh::sync::ipc::process_launcher&lt; Path, IsBinary &gt;::handle</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process handle representing a single launched instance.  <a href="structjh_1_1sync_1_1ipc_1_1process__launcher_1_1handle.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a99d07deb321967eac2d1f1617c18769c" id="r_a99d07deb321967eac2d1f1617c18769c"><td class="memItemLeft"><a id="a99d07deb321967eac2d1f1617c18769c" name="a99d07deb321967eac2d1f1617c18769c"></a>
#define&#160;</td><td class="memItemRight"><b>JH_ALLOW_PARENT_PATH</b>&#160;&#160;&#160;0</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Cross-platform process launcher aligned with std::thread semantics. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2025 JeongHan-Bae &lt;mastropseudo@gmail.com&gt; <br  />
 Licensed under the Apache License, Version 2.0 (the "License"); <br  />
 you may not use this file except in compliance with the License.<br  />
 You may obtain a copy of the License at<br  />
 <br  />
 <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a><br  />
 <br  />
 Unless required by applicable law or agreed to in writing, software<br  />
 distributed under the License is distributed on an "AS IS" BASIS,<br  />
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br  />
 See the License for the specific language governing permissions and<br  />
 limitations under the License.<br  />
 <br  />
 Full license: <a href="https://github.com/JeongHan-Bae/JH-Toolkit?tab=Apache-2.0-1-ov-file#readme">GitHub</a></dd></dl>
<h3>Rationale</h3>
<p>This class encapsulates the platform-specific differences between POSIX <code>fork() + execl()</code> and Windows <code>CreateProcess()</code>, exposing a unified <b>std::thread-like</b> API. </p>
<h3>Platform differences</h3>
<ul>
<li>
<b>POSIX (Linux &amp; UNIX)</b>: <ul>
<li>
Any file with execute permission can be launched (binary or script). </li>
<li>
<code>fork()</code> creates the child, <code>execl()</code> replaces its image. </li>
<li>
<code>wait()</code> maps to <code>waitpid()</code>. </li>
</ul>
</li>
<li>
<b>Windows / MSYS2</b>: <ul>
<li>
Child processes must originate from an <b>executable image</b> (e.g. <code>.exe</code>, <code>.bat</code>, <code>.ps1</code>). </li>
<li>
<code>CreateProcess()</code> is used for launching. </li>
<li>
<code>wait()</code> maps to <code>WaitForSingleObject()</code>. </li>
</ul>
</li>
</ul>
<h3>Binary flag</h3>
<p>The template parameter <code>IsBinary</code> exists to simplify build workflows (especially for CMake-generated executables): </p>
<ul>
<li>
If <b>true</b>: <ul>
<li>
On Windows, <code>".exe"</code> is appended automatically (so <code>"writer"</code> → <code>"writer.exe"</code>). </li>
<li>
On POSIX, the path is used directly (no extension manipulation). </li>
</ul>
</li>
<li>
If <b>false</b>: <ul>
<li>
The string is used as-is (Windows: may be <code>.bat</code>, <code>.ps1</code>; POSIX: may be script with shebang + execute permission). </li>
</ul>
</li>
</ul>
<h3>Path rules</h3>
<ul>
<li>
The template string must be a <b>POSIX-style relative path</b>: <ul>
<li>
No leading <code>'/'</code> (absolute paths forbidden). </li>
<li>
<code>"./"</code> segments are meaningless and rejected. </li>
<li>
<code>".."</code> handling: <ul>
<li>
By default (<code>JH_ALLOW_PARENT_PATH == 0</code>): any <code>".."</code> is forbidden. </li>
<li>
If <code>JH_ALLOW_PARENT_PATH == 1</code>: leading <code>"../"</code> prefixes are permitted (one or more), but: <ul>
<li>
The entire path cannot consist only of <code>"../"</code> segments. </li>
<li>
Once non-empty content has been appended, no further <code>".."</code> segments are allowed. </li>
</ul>
</li>
</ul>
</li>
<li>
Allowed characters: <code>[A-Za-z0-9_.-/]</code>. </li>
<li>
Length must be within <b>[1, 128]</b>. </li>
</ul>
</li>
<li>
No need to prefix with <code>"./"</code> or use <code>'\'</code>: paths are interpreted directly by the filesystem and resolved relative to the current working directory. </li>
</ul>
<h4>Path policy</h4>
<ul>
<li>
<b>Strict validation at compile time</b>: <ul>
<li>
Illegal characters are rejected. </li>
<li>
<code>"./"</code> or mid-path <code>".."</code> segments are forbidden. </li>
<li>
Absolute paths (<code>"/foo/bar"</code>) are forbidden by design. </li>
</ul>
</li>
<li>
<b>Parent path relaxation</b> (<code>JH_ALLOW_PARENT_PATH</code>): <ul>
<li>
Disabled (default = 0): any <code>".."</code> usage is an error. </li>
<li>
Enabled (= 1): only leading <code>"../"</code> prefixes are permitted; they must be followed by a valid non-empty subpath. </li>
</ul>
</li>
<li>
<b>Cross-platform normalization</b>: <ul>
<li>
POSIX: used as-is, relative to <code>cwd</code>. </li>
<li>
Windows: forward slashes (<code>'/'</code>) are translated automatically; backslashes are not required. </li>
</ul>
</li>
<li>
<b>Security note</b>: <ul>
<li>
Forbidding <code>..</code> in the middle of paths prevents directory traversal vulnerabilities. </li>
<li>
Restricting to relative paths avoids accidental execution of system binaries outside the project tree. </li>
</ul>
</li>
</ul>
<h3>Semantics</h3>
<ul>
<li>
Strictly aligned with <code>std::thread</code>: <ul>
<li>
A <b>handle</b> must be explicitly <code>wait()</code>-ed. </li>
<li>
If destroyed without waiting, <code>std::terminate()</code> is invoked. </li>
<li>
No <em>kill</em> or <em>stop</em> operations are provided. </li>
</ul>
</li>
<li>
The number and identity of launchers are fixed at <b>compile time</b> by the template string parameter. </li>
<li>
The class itself is an <b>empty static interface</b>: <ul>
<li>
Cannot be instantiated. </li>
<li>
Provides only <code>start()</code> for launching. </li>
</ul>
</li>
</ul>
<h4>Handle semantics &amp; security rationale</h4>
<ul>
<li>
Each call to <code>start()</code> returns a unique, move-only <code>handle</code> representing one running process. </li>
<li>
The handle enforces <b>strict ownership</b>: <ul>
<li>
It must be <code>wait()</code>-ed before destruction. </li>
<li>
Destruction of an active handle triggers <code>std::terminate()</code>. </li>
<li>
Move transfers ownership; the source becomes invalid and cannot be moved or waited again. </li>
<li>
Assigning into an active handle also terminates the program. </li>
</ul>
</li>
<li>
Each <code>process_launcher&lt;Path, IsBinary&gt;</code> has its own nested handle type, <b>bound to its executable at compile time</b>. </li>
<li>
This binding is a deliberate design for both type safety and security: <ul>
<li>
Prevents handle reuse or hijacking across launchers. </li>
<li>
Disallows runtime path injection or substitution attacks. </li>
<li>
Guarantees the executable path is compile-time verified. </li>
</ul>
</li>
<li>
A unified generic handle is intentionally avoided because it would: <ul>
<li>
Break compile-time validation guarantees, </li>
<li>
Enable runtime path injection, </li>
<li>
And expand the attack surface for untrusted binaries. </li>
</ul>
</li>
<li>
By keeping the handle type bound to its launcher, the system enforces a static trust boundary: only pre-validated, known executables can run. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
</div> <!-- top -->
<hr class="footer"/>
<div class="footer">
    <img class="footer-logo" src="Ojing.svg" alt="Ojing"/>
    <div class="footer-text">
        JH-Toolkit v1.4.0 · Generated by Doxygen
    </div>
    <div class="footer-note">
        We primarily support embedded documentation views in IDEs (classic CLion).
        To ensure compatibility with embedded rendering, some example code in this
        documentation intentionally contains HTML entities.
        In certain cases, Doxygen does not unescape these entities correctly.
        This is a known limitation and currently has no workaround.
    </div>
</div>
</body>
</html>
