<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JH-Toolkit: jh::async::fiber Class Reference</title>
<link rel="icon" href="Jindallae.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Oree.svg"/></td>
  <td id="projectalign">
   <div id="projectname">JH-Toolkit<span id="projectnumber">&#160;v1.4.0</span>
   </div>
   <div id="projectbrief">An engineering-oriented C++20 toolkit with duck-typed concepts, static design, async coroutines, and semantic containers — header-only, RTTI-free, and concurrency-friendly.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classjh_1_1async_1_1fiber.html','','classjh_1_1async_1_1fiber-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">jh::async::fiber Class Reference<span class="mlabels"><span class="mlabel final">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Coroutine-based fiber providing manual suspension and resumption.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="">jh/asynchronous/fiber.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:promise_5Ftype" id="r_promise_5Ftype"><td class="memItemLeft">struct &#160;</td><td class="memItemRight"><a class="el" href="structjh_1_1async_1_1fiber_1_1promise__type.html">promise_type</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0d9eb73eb77fb819b3668d305d45bf45" id="r_a0d9eb73eb77fb819b3668d305d45bf45"><td class="memItemLeft">&#160;</td><td class="memItemRight"><a class="el" href="#a0d9eb73eb77fb819b3668d305d45bf45">fiber</a> (std::coroutine_handle&lt; <a class="el" href="structjh_1_1async_1_1fiber_1_1promise__type.html">promise_type</a> &gt; h) noexcept</td></tr>
<tr class="memdesc:a0d9eb73eb77fb819b3668d305d45bf45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a fiber from a coroutine handle.  <br /></td></tr>
<tr class="memitem:a330720900f06baa9ed5586b45354ee06" id="r_a330720900f06baa9ed5586b45354ee06"><td class="memItemLeft">&#160;</td><td class="memItemRight"><a class="el" href="#a330720900f06baa9ed5586b45354ee06">~fiber</a> ()</td></tr>
<tr class="memdesc:a330720900f06baa9ed5586b45354ee06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the fiber and its coroutine frame if valid.  <br /></td></tr>
<tr class="memitem:a9d8c7ae024ffc96091300a1cb1039982" id="r_a9d8c7ae024ffc96091300a1cb1039982"><td class="memItemLeft">&#160;</td><td class="memItemRight"><a class="el" href="#a9d8c7ae024ffc96091300a1cb1039982">fiber</a> (const fiber &amp;)=delete</td></tr>
<tr class="memdesc:a9d8c7ae024ffc96091300a1cb1039982"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy construction is disabled.  <br /></td></tr>
<tr class="memitem:adf982a91d7981d3dd5306159bf6f5ff4" id="r_adf982a91d7981d3dd5306159bf6f5ff4"><td class="memItemLeft"><a id="adf982a91d7981d3dd5306159bf6f5ff4" name="adf982a91d7981d3dd5306159bf6f5ff4"></a>
<a class="el" href="#a0d9eb73eb77fb819b3668d305d45bf45">fiber</a> &amp;&#160;</td><td class="memItemRight"><b>operator=</b> (const <a class="el" href="#a0d9eb73eb77fb819b3668d305d45bf45">fiber</a> &amp;)=delete</td></tr>
<tr class="memdesc:adf982a91d7981d3dd5306159bf6f5ff4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy assignment is disabled. <br /></td></tr>
<tr class="memitem:af2c13b8488811addf91d67a58faf38e8" id="r_af2c13b8488811addf91d67a58faf38e8"><td class="memItemLeft">&#160;</td><td class="memItemRight"><a class="el" href="#af2c13b8488811addf91d67a58faf38e8">fiber</a> (fiber &amp;&amp;other) noexcept</td></tr>
<tr class="memdesc:af2c13b8488811addf91d67a58faf38e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructor transferring ownership of the coroutine handle.  <br /></td></tr>
<tr class="memitem:a8c00b1519d3ac240acc38c8ca603beb2" id="r_a8c00b1519d3ac240acc38c8ca603beb2"><td class="memItemLeft"><a class="el" href="#a0d9eb73eb77fb819b3668d305d45bf45">fiber</a> &amp;&#160;</td><td class="memItemRight"><a class="el" href="#a8c00b1519d3ac240acc38c8ca603beb2">operator=</a> (<a class="el" href="#a0d9eb73eb77fb819b3668d305d45bf45">fiber</a> &amp;&amp;other) noexcept</td></tr>
<tr class="memdesc:a8c00b1519d3ac240acc38c8ca603beb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assignment operator transferring ownership of the coroutine handle.  <br /></td></tr>
<tr class="memitem:abe2ad17874437f1108aee0c542fb501b" id="r_abe2ad17874437f1108aee0c542fb501b"><td class="memItemLeft">bool&#160;</td><td class="memItemRight"><a class="el" href="#abe2ad17874437f1108aee0c542fb501b">done</a> () const noexcept</td></tr>
<tr class="memdesc:abe2ad17874437f1108aee0c542fb501b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the fiber has reached its final suspend point.  <br /></td></tr>
<tr class="memitem:ad37de47abf93ac939f7f5a62676ccc6b" id="r_ad37de47abf93ac939f7f5a62676ccc6b"><td class="memItemLeft">bool&#160;</td><td class="memItemRight"><a class="el" href="#ad37de47abf93ac939f7f5a62676ccc6b">resume</a> ()</td></tr>
<tr class="memdesc:ad37de47abf93ac939f7f5a62676ccc6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resumes execution of the fiber.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-attribs" class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a9a4b7ee6a72404186dcd133513f43ad7" id="r_a9a4b7ee6a72404186dcd133513f43ad7"><td class="memItemLeft"><a id="a9a4b7ee6a72404186dcd133513f43ad7" name="a9a4b7ee6a72404186dcd133513f43ad7"></a>
std::coroutine_handle&lt; <a class="el" href="structjh_1_1async_1_1fiber_1_1promise__type.html">promise_type</a> &gt;&#160;</td><td class="memItemRight"><b>co_ro</b></td></tr>
<tr class="memdesc:a9a4b7ee6a72404186dcd133513f43ad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle to the coroutine. <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Coroutine-based fiber providing manual suspension and resumption. </p>
<p>A <code>fiber</code> models a manually advanced coroutine, conceptually equivalent to a thread blocked on <code>std::condition_variable.wait()</code>: </p>
<p>execution is suspended until an explicit external resume request is issued. Unlike an OS thread, a <code>fiber</code> is extremely lightweight because it stores only a coroutine frame, not a stack. </p>
<p>Suspension inside the coroutine is performed using <code>co_await resume_tag</code>, which introduces a controlled wait point analogous to <code>condition_variable.wait()</code>: </p><ul>
<li>
always suspends, </li>
<li>
registers no scheduler, </li>
<li>
resumes only when the caller explicitly invokes <code><a class="el" href="#ad37de47abf93ac939f7f5a62676ccc6b" title="Resumes execution of the fiber.">resume()</a></code>. </li>
</ul>
<p>Exception propagation is disabled inside a <code>fiber</code>. Any uncaught exception results in a call to <code>std::terminate()</code>, matching the semantics of a thread whose entry function throws without being caught. This avoids continuing execution after a fatal error.</p>
<h4>Behavior Characteristics</h4>
<ul>
<li>
Lightweight coroutine frame instead of an OS thread. </li>
<li>
Manual control: external calls to <code><a class="el" href="#ad37de47abf93ac939f7f5a62676ccc6b" title="Resumes execution of the fiber.">resume()</a></code> drive progress. </li>
<li>
<code>co_await resume_tag</code> provides explicit suspension points. </li>
<li>
Fatal errors end in <code>std::terminate()</code>, matching thread behavior. </li>
</ul>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0d9eb73eb77fb819b3668d305d45bf45" name="a0d9eb73eb77fb819b3668d305d45bf45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d9eb73eb77fb819b3668d305d45bf45">&#9670;&#160;</a></span>fiber() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">jh::async::fiber::fiber </td>
          <td>(</td>
          <td class="paramtype">std::coroutine_handle&lt; <a class="el" href="structjh_1_1async_1_1fiber_1_1promise__type.html">promise_type</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>h</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel explicit">explicit</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a fiber from a coroutine handle. </p>
<p>The passed handle represents an allocated coroutine frame created by <code><a class="el" href="structjh_1_1async_1_1fiber_1_1promise__type.html#a08e3edd050f952cf762846ef5c32b52b" title="Creates and returns the generator object.">promise_type.get_return_object()</a></code>. Ownership is adopted by the <code>fiber</code> instance, which is responsible for destroying the frame when no longer needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>The coroutine handle associated with this fiber. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a330720900f06baa9ed5586b45354ee06" name="a330720900f06baa9ed5586b45354ee06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a330720900f06baa9ed5586b45354ee06">&#9670;&#160;</a></span>~fiber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">jh::async::fiber::~fiber </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroys the fiber and its coroutine frame if valid. </p>
<p>If the internal coroutine handle is non-null, its coroutine frame is destroyed via <code>destroy()</code>. This fully releases all memory associated with the coroutine. </p>

</div>
</div>
<a id="a9d8c7ae024ffc96091300a1cb1039982" name="a9d8c7ae024ffc96091300a1cb1039982"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d8c7ae024ffc96091300a1cb1039982">&#9670;&#160;</a></span>fiber() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">jh::async::fiber::fiber </td>
          <td>(</td>
          <td class="paramtype">const fiber &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel delete">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy construction is disabled. </p>
<p>A fiber represents exclusive ownership of a coroutine frame; copying the handle would produce double-destruction and is therefore prohibited. </p>

</div>
</div>
<a id="af2c13b8488811addf91d67a58faf38e8" name="af2c13b8488811addf91d67a58faf38e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2c13b8488811addf91d67a58faf38e8">&#9670;&#160;</a></span>fiber() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">jh::async::fiber::fiber </td>
          <td>(</td>
          <td class="paramtype">fiber &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>other</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move constructor transferring ownership of the coroutine handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">other</td><td>Source fiber whose handle will be moved from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="abe2ad17874437f1108aee0c542fb501b" name="abe2ad17874437f1108aee0c542fb501b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe2ad17874437f1108aee0c542fb501b">&#9670;&#160;</a></span>done()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jh::async::fiber::done </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether the fiber has reached its final suspend point. </p>
<p>A fiber is considered complete if: </p><ul>
<li>
it has no coroutine handle, or </li>
<li>
its coroutine handle reports <code><a class="el" href="#abe2ad17874437f1108aee0c542fb501b" title="Checks whether the fiber has reached its final suspend point.">done()</a> == true</code>. </li>
</ul>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the coroutine is finished; otherwise <code>false</code>. </dd></dl>

</div>
</div>
<a id="a8c00b1519d3ac240acc38c8ca603beb2" name="a8c00b1519d3ac240acc38c8ca603beb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c00b1519d3ac240acc38c8ca603beb2">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a0d9eb73eb77fb819b3668d305d45bf45">fiber</a> &amp; jh::async::fiber::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a0d9eb73eb77fb819b3668d305d45bf45">fiber</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>other</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move assignment operator transferring ownership of the coroutine handle. </p>
<p>Destroys the current coroutine frame if present, then adopts the frame from <code>other</code>. The source fiber is left in a null state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">other</td><td>Source fiber. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>*this</code>. </dd></dl>

</div>
</div>
<a id="ad37de47abf93ac939f7f5a62676ccc6b" name="ad37de47abf93ac939f7f5a62676ccc6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad37de47abf93ac939f7f5a62676ccc6b">&#9670;&#160;</a></span>resume()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jh::async::fiber::resume </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resumes execution of the fiber. </p>
<p>If the fiber is already complete, the function returns <code>false</code>. Otherwise, it resumes the coroutine, advancing it until the next suspension point (<code>co_await resume_tag</code>) or final completion.</p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if further progress is possible; <code>false</code> if the fiber has finished execution. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/jh/asynchronous/<a class="el" href="">fiber.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
</div> <!-- top -->
<hr class="footer"/>
<div class="footer">
    <img class="footer-logo" src="Ojing.svg" alt="Ojing"/>
    <div class="footer-text">
        JH-Toolkit v1.4.0 · Generated by Doxygen
    </div>
    <div class="footer-note">
        We primarily support embedded documentation views in IDEs (classic CLion).
        To ensure compatibility with embedded rendering, some example code in this
        documentation intentionally contains HTML entities.
        In certain cases, Doxygen does not unescape these entities correctly.
        This is a known limitation and currently has no workaround.
    </div>
</div>
</body>
</html>
