<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JH-Toolkit: jh::async::listener&lt; T &gt; Class Template Reference</title>
<link rel="icon" href="Jindallae.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Oree.svg"/></td>
  <td id="projectalign">
   <div id="projectname">JH-Toolkit<span id="projectnumber">&#160;v1.4.0</span>
   </div>
   <div id="projectbrief">An engineering-oriented C++20 toolkit with duck-typed concepts, static design, async coroutines, and semantic containers — header-only, RTTI-free, and concurrency-friendly.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classjh_1_1async_1_1listener.html','','classjh_1_1async_1_1listener-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">jh::async::listener&lt; T &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A one-shot inbox that serves as the <b>fan-in aggregation point</b>.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="">jh/asynchronous/slot.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-types" class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a6099c9d354f28b4200d446d0bd936df7" id="r_a6099c9d354f28b4200d446d0bd936df7"><td class="memItemLeft"><a id="a6099c9d354f28b4200d446d0bd936df7" name="a6099c9d354f28b4200d446d0bd936df7"></a>
using&#160;</td><td class="memItemRight"><b>value_type</b> = T</td></tr>
<tr class="memdesc:a6099c9d354f28b4200d446d0bd936df7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of value delivered to this listener. <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa30b141eb9203ffc908675da45095e0f" id="r_aa30b141eb9203ffc908675da45095e0f"><td class="memItemLeft">bool&#160;</td><td class="memItemRight"><a class="el" href="#aa30b141eb9203ffc908675da45095e0f">await_ready</a> () const noexcept</td></tr>
<tr class="memdesc:aa30b141eb9203ffc908675da45095e0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the coroutine should resume immediately.  <br /></td></tr>
<tr class="memitem:a745bef84a0db61e55ce892fd4aff6916" id="r_a745bef84a0db61e55ce892fd4aff6916"><td class="memItemLeft">void&#160;</td><td class="memItemRight"><a class="el" href="#a745bef84a0db61e55ce892fd4aff6916">await_suspend</a> (std::coroutine_handle&lt;&gt; h) noexcept</td></tr>
<tr class="memdesc:a745bef84a0db61e55ce892fd4aff6916"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register coroutine handle for resumption.  <br /></td></tr>
<tr class="memitem:a8e49c8e0c24c9c974cc07db574ba3c51" id="r_a8e49c8e0c24c9c974cc07db574ba3c51"><td class="memItemLeft">T&#160;</td><td class="memItemRight"><a class="el" href="#a8e49c8e0c24c9c974cc07db574ba3c51">await_resume</a> ()</td></tr>
<tr class="memdesc:a8e49c8e0c24c9c974cc07db574ba3c51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume coroutine and consume the value.  <br /></td></tr>
<tr class="memitem:a8e41dbe0485c2f7f4fed920e651ff446" id="r_a8e41dbe0485c2f7f4fed920e651ff446"><td class="memTemplParams" colspan="2">template&lt;typename... Args&gt; </td></tr>
<tr class="memitem:a8e41dbe0485c2f7f4fed920e651ff446 template"><td class="memItemLeft">bool&#160;</td><td class="memItemRight"><a class="el" href="#a8e41dbe0485c2f7f4fed920e651ff446">invoke</a> (Args &amp;&amp;... args)</td></tr>
<tr class="memdesc:a8e41dbe0485c2f7f4fed920e651ff446"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deliver a new value to this listener.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-friends" class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a244215b5c7010201dd6852d41ab9f36a" id="r_a244215b5c7010201dd6852d41ab9f36a"><td class="memItemLeft"><a id="a244215b5c7010201dd6852d41ab9f36a" name="a244215b5c7010201dd6852d41ab9f36a"></a>
class&#160;</td><td class="memItemRight"><b>slot_hub</b></td></tr>
<tr class="memdesc:a244215b5c7010201dd6852d41ab9f36a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables <a class="el" href="classjh_1_1async_1_1slot__hub.html" title="Synchronization domain managing timed mutex acquisition and binding exactly one slot.">slot_hub</a> to create listeners. <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename T&gt;<br />
class jh::async::listener&lt; T &gt;</div><p>A one-shot inbox that serves as the <b>fan-in aggregation point</b>. </p>
<h4>Construction</h4>
<p><b>A listener cannot be created directly.</b><br  />
 It must always be constructed through <code><a class="el" href="classjh_1_1async_1_1slot__hub.html#a71481837f93c22ebdac4c36dc1932c57" title="Create a new listener bound to this slot_hub.">slot_hub::make_listener&lt;T&gt;()</a></code>. </p>
<p>This restriction is intentional: a listener without an associated <code><a class="el" href="classjh_1_1async_1_1slot__hub.html" title="Synchronization domain managing timed mutex acquisition and binding exactly one slot.">slot_hub</a></code> is semantically meaningless. A listener's fundamental responsibilities—synchronous delivery, timed-mutex protection, and <code>slot</code> resumption—require a <code><a class="el" href="classjh_1_1async_1_1slot__hub.html" title="Synchronization domain managing timed mutex acquisition and binding exactly one slot.">slot_hub</a></code> context. Thus, its constructor is private and <code><a class="el" href="classjh_1_1async_1_1slot__hub.html" title="Synchronization domain managing timed mutex acquisition and binding exactly one slot.">slot_hub</a></code> acts as the factory and parent domain. </p>
<h4>Positioning</h4>
<p>A listener represents a <em>single suspension point</em> for the slot. It aggregates events coming from one or more <code><a class="el" href="classjh_1_1async_1_1event__signal.html" title="Lightweight push-only event emitter.">event_signal</a></code> objects and delivers them synchronously to the slot. </p>
<h4>Fan-in Capabilities</h4>
<p>A <code>listener</code> supports: </p><ul>
<li>
<b>Single-source binding</b>: one <code><a class="el" href="classjh_1_1async_1_1event__signal.html" title="Lightweight push-only event emitter.">event_signal&lt;T&gt;</a></code> → <code><a class="el" href="classjh_1_1async_1_1listener.html" title="A one-shot inbox that serves as the fan-in aggregation point.">listener&lt;T&gt;</a></code> </li>
<li>
<b>Multi-source equivalent binding</b>: many <code><a class="el" href="classjh_1_1async_1_1event__signal.html" title="Lightweight push-only event emitter.">event_signal&lt;T&gt;</a></code> → same <code><a class="el" href="classjh_1_1async_1_1listener.html" title="A one-shot inbox that serves as the fan-in aggregation point.">listener&lt;T&gt;</a></code> (sources are indistinguishable) </li>
<li>
<b>Multi-source fan-in with identification</b>: <ul>
<li>
<code><a class="el" href="classjh_1_1async_1_1listener.html" title="A one-shot inbox that serves as the fan-in aggregation point.">listener&lt;std::tuple&lt;ID, T&gt;&gt;</a></code> </li>
<li>
<code><a class="el" href="classjh_1_1async_1_1listener.html" title="A one-shot inbox that serves as the fan-in aggregation point.">listener&lt;std::tuple&lt;ID, std::variant&lt;T...&gt;&gt;&gt;</a></code> </li>
</ul>
Sources can be distinguished inside the slot. </li>
</ul>
<h4>Inbox Semantics</h4>
<ul>
<li>
Holds at most one value. </li>
<li>
Value is consumed during <code><a class="el" href="#a8e49c8e0c24c9c974cc07db574ba3c51" title="Resume coroutine and consume the value.">await_resume()</a></code>. </li>
<li>
No buffering or overwriting. </li>
<li>
Write + resume is atomic under <code><a class="el" href="classjh_1_1async_1_1slot__hub.html" title="Synchronization domain managing timed mutex acquisition and binding exactly one slot.">slot_hub</a></code> mutex. </li>
<li>
Rejection happens only when the mutex cannot be acquired within timeout. </li>
</ul>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Payload type delivered to the slot.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>A <code>slot</code> must only await one <code>listener</code> at a time. Parallel awaits violate the asynchronous semantics and are strongly discouraged.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The listener must share lifetime with its <code><a class="el" href="classjh_1_1async_1_1slot__hub.html" title="Synchronization domain managing timed mutex acquisition and binding exactly one slot.">slot_hub</a></code> and <code>slot</code>. </dd></dl>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="aa30b141eb9203ffc908675da45095e0f" name="aa30b141eb9203ffc908675da45095e0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa30b141eb9203ffc908675da45095e0f">&#9670;&#160;</a></span>await_ready()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classjh_1_1async_1_1listener.html">jh::async::listener</a>&lt; T &gt;::await_ready </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the coroutine should resume immediately. </p>
<p>Always returns false to suspend the coroutine. </p><dl class="section return"><dt>Returns</dt><dd>false </dd></dl>

</div>
</div>
<a id="a8e49c8e0c24c9c974cc07db574ba3c51" name="a8e49c8e0c24c9c974cc07db574ba3c51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e49c8e0c24c9c974cc07db574ba3c51">&#9670;&#160;</a></span>await_resume()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T <a class="el" href="classjh_1_1async_1_1listener.html">jh::async::listener</a>&lt; T &gt;::await_resume </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resume coroutine and consume the value. </p>
<p>Extracts the stored value from the inbox and clears it. </p><dl class="section return"><dt>Returns</dt><dd>The value of type T delivered by a signal. </dd></dl>

</div>
</div>
<a id="a745bef84a0db61e55ce892fd4aff6916" name="a745bef84a0db61e55ce892fd4aff6916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a745bef84a0db61e55ce892fd4aff6916">&#9670;&#160;</a></span>await_suspend()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classjh_1_1async_1_1listener.html">jh::async::listener</a>&lt; T &gt;::await_suspend </td>
          <td>(</td>
          <td class="paramtype">std::coroutine_handle&lt;&gt;</td>          <td class="paramname"><span class="paramname"><em>h</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register coroutine handle for resumption. </p>
<p>Stores the coroutine handle to resume later when value is delivered. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>Coroutine handle. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8e41dbe0485c2f7f4fed920e651ff446" name="a8e41dbe0485c2f7f4fed920e651ff446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e41dbe0485c2f7f4fed920e651ff446">&#9670;&#160;</a></span>invoke()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<div class="memtemplate">
template&lt;typename... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classjh_1_1async_1_1listener.html">jh::async::listener</a>&lt; T &gt;::invoke </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...</td>          <td class="paramname"><span class="paramname"><em>args</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deliver a new value to this listener. </p>
<p>Attempts to acquire the mutex, store the value, and resume the attached slot. </p><dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Args</td><td>Constructor arguments for T. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>Arguments to construct the value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the value was accepted and slot resumed, false otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/jh/asynchronous/<a class="el" href="">slot.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
</div> <!-- top -->
<hr class="footer"/>
<div class="footer">
    <img class="footer-logo" src="Ojing.svg" alt="Ojing"/>
    <div class="footer-text">
        JH-Toolkit v1.4.0 · Generated by Doxygen
    </div>
    <div class="footer-note">
        We primarily support embedded documentation views in IDEs (classic CLion).
        To ensure compatibility with embedded rendering, some example code in this
        documentation intentionally contains HTML entities.
        In certain cases, Doxygen does not unescape these entities correctly.
        This is a known limitation and currently has no workaround.
    </div>
</div>
</body>
</html>
