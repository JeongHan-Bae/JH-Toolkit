<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JH-Toolkit: include/jh/macros/header_begin.h File Reference</title>
<link rel="icon" href="Jindallae.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Oree.svg"/></td>
  <td id="projectalign">
   <div id="projectname">JH-Toolkit<span id="projectnumber">&#160;v1.4.0</span>
   </div>
   <div id="projectbrief">An engineering-oriented C++20 toolkit with duck-typed concepts, static design, async coroutines, and semantic containers — header-only, RTTI-free, and concurrency-friendly.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('header__begin_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">header_begin.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Macro setup for dual-mode headers (header-only / static).  
<a href="#details">More...</a></p>

<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a867349dd884a3e148ab78cf546e8bfed" id="r_a867349dd884a3e148ab78cf546e8bfed"><td class="memItemLeft"><a id="a867349dd884a3e148ab78cf546e8bfed" name="a867349dd884a3e148ab78cf546e8bfed"></a>
#define&#160;</td><td class="memItemRight"><b>JH_INTERNAL_SHOULD_DEFINE</b>&#160;&#160;&#160;1</td></tr>
<tr class="memitem:aadea56ae56d924adb691a166f76152ed" id="r_aadea56ae56d924adb691a166f76152ed"><td class="memItemLeft"><a id="aadea56ae56d924adb691a166f76152ed" name="aadea56ae56d924adb691a166f76152ed"></a>
#define&#160;</td><td class="memItemRight"><b>JH_INLINE</b>&#160;&#160;&#160;inline</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Macro setup for dual-mode headers (header-only / static). </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2025 JeongHan-Bae &lt;mastropseudo@gmail.com&gt; <br  />
 Licensed under the Apache License, Version 2.0 (the "License"); <br  />
 you may not use this file except in compliance with the License.<br  />
 You may obtain a copy of the License at<br  />
 <br  />
 <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a><br  />
 <br  />
 Unless required by applicable law or agreed to in writing, software<br  />
 distributed under the License is distributed on an "AS IS" BASIS,<br  />
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br  />
 See the License for the specific language governing permissions and<br  />
 limitations under the License.<br  />
 <br  />
 Full license: <a href="https://github.com/JeongHan-Bae/JH-Toolkit?tab=Apache-2.0-1-ov-file#readme">GitHub</a></dd></dl>
<dl class="section author"><dt>Author</dt><dd>JeongHan-Bae <a href="#" onclick="location.href='mai'+'lto:'+'mas'+'tr'+'ops'+'eu'+'do@'+'gm'+'ail'+'.c'+'om'; return false;">&lt;mastropseudo@gmail.com&gt;</a> </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>This header is intended for multiple inclusions. Do NOT use include guards or <code>#pragma once</code>.</dd></dl>
<h3>Overview</h3>
<p>This header initializes macros that control whether a header emits inline definitions (header-only mode) or only declarations (linked static/shared mode). It allows one unified <code>.h</code> file to serve both build styles. </p>
<h3>Build Modes</h3>
<table class="doxtable">
<tr>
<th>Macro</th><th>Definition Behavior</th><th>Description</th></tr>
<tr>
<td><code>(none)</code></td><td>Emit inline definitions</td><td>Default header-only mode.</td></tr>
<tr>
<td><code>JH_HEADER_IMPL_BUILD</code></td><td>Emit non-inline definitions</td><td>Used by the single implementation TU.</td></tr>
<tr>
<td><code>JH_HEADER_NO_IMPL</code></td><td>Suppress definitions (declarations only)</td><td>Used when linking prebuilt objects.</td></tr>
</table>
<h3>Pseudocode Layout</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="header__begin_8h.html">jh/macros/header_begin.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// === Declarations ===</span></div>
<div class="line">declare_classes_or_functions();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// === Implementations ===</span></div>
<div class="line"><span class="comment">// 1. Must-visible functions (depend on user macros)</span></div>
<div class="line">must_be_visible_implementation();  <span class="comment">// placed outside conditional</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// 2. Conditionally defined implementations</span></div>
<div class="line"><span class="preprocessor">#if JH_INTERNAL_SHOULD_DEFINE</span></div>
<div class="line">    JH_INLINE normal_or_inline_implementation();</div>
<div class="line"><span class="preprocessor">#endif  </span><span class="comment">// JH_INTERNAL_SHOULD_DEFINE</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="header__end_8h.html">jh/macros/header_end.h</a>&gt;</span></div>
<div class="ttc" id="aheader__begin_8h_html"><div class="ttname"><a href="header__begin_8h.html">header_begin.h</a></div><div class="ttdoc">Macro setup for dual-mode headers (header-only / static).</div></div>
<div class="ttc" id="aheader__end_8h_html"><div class="ttname"><a href="header__end_8h.html">header_end.h</a></div><div class="ttdoc">Cleanup header for jh/macros/header_begin.h.</div></div>
</div><!-- fragment --><h3>Visibility Rules</h3>
<ul>
<li>
<b>Functions whose behavior depends on caller-side compile-time macros</b> (e.g. platform, feature toggles, template specializations) <b>must remain visible</b> in every translation unit — therefore they belong <b>outside</b> the <code>#if JH_INTERNAL_SHOULD_DEFINE</code> block. </li>
<li>
All other normal definitions should be wrapped inside <code>#if JH_INTERNAL_SHOULD_DEFINE</code> to avoid redefinition when linked from a static or shared object. </li>
<li>
Always finish the header with <code>#include &lt;<a class="el" href="header__end_8h.html" title="Cleanup header for jh/macros/header_begin.h.">jh/macros/header_end.h</a>&gt;</code>. </li>
</ul>
<hr  />
 <h3>Usage Guide: Using Dual-Mode Headers</h3>
<p>Once you have written a header using <code>&lt;<a class="el" href="header__begin_8h.html" title="Macro setup for dual-mode headers (header-only / static).">jh/macros/header_begin.h</a>&gt;</code> and <code>&lt;<a class="el" href="header__end_8h.html" title="Cleanup header for jh/macros/header_begin.h.">jh/macros/header_end.h</a>&gt;</code>, you can control how that header behaves in each translation unit (TU) by defining specific macros <em>before</em> including it. </p>
<h4>Basic Inclusion Modes</h4>
<ul>
<li>
<p class="startli"><b>Header-only (default)</b><br  />
 <code>#include "example.h"</code><br  />
 Emits <span class="tt">inline</span> definitions. Safe for multiple inclusion. Ideal for direct inclusion without linking any static library.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>Implementation TU (static/shared build)</b><br  />
 <code>#define JH_HEADER_IMPL_BUILD</code><br  />
 <code>#include "example.h"</code><br  />
 Emits <em>non-inline</em> strong definitions. Only one TU should use this mode.</p>
<p class="endli"></p>
</li>
<li>
<b>Interface-only (no definition)</b><br  />
 <code>#define JH_HEADER_NO_IMPL</code><br  />
 <code>#include "example.h"</code><br  />
 <code>#undef JH_HEADER_NO_IMPL</code><br  />
 Suppresses all definitions and exposes only declarations. Useful when only type visibility is needed. </li>
</ul>
<h4>Dependency Example</h4>
<p>Suppose <code>other.h</code> depends on <code>example.h</code>. When you want to strongly instantiate <code>other</code> but not <code>example</code> in the same TU: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;example.h&quot;</span>          <span class="comment">// header-only (inline) mode</span></div>
<div class="line"><span class="preprocessor">#define JH_HEADER_IMPL_BUILD</span></div>
<div class="line"><span class="preprocessor">#include &quot;other.h&quot;</span>            <span class="comment">// strong definition for other</span></div>
</div><!-- fragment --><p>Because <code>example.h</code> has already been included once, its definitions are fixed for this TU. Any further includes (directly or indirectly) are guarded and will not re-instantiate. </p>
<h4>Special Case (not recommended)</h4>
<p>If you need to build <code>other</code> but not include any <code>example</code> implementation at all: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#define JH_HEADER_NO_IMPL</span></div>
<div class="line"><span class="preprocessor">#include &quot;example.h&quot;</span></div>
<div class="line"><span class="preprocessor">#undef  JH_HEADER_NO_IMPL</span></div>
<div class="line"><span class="preprocessor">#define JH_HEADER_IMPL_BUILD</span></div>
<div class="line"><span class="preprocessor">#include &quot;other.h&quot;</span></div>
</div><!-- fragment --> <p>This is valid only if another TU already provides the strong definition of <code>example</code>. </p>
<h4>Key Principle</h4>
<ul>
<li>
The first inclusion of a dual-mode header within a TU <b>locks its behavior</b>. </li>
<li>
Later inclusions (even indirect ones) reuse that locked mode because of header guards or <span class="tt">#pragma once</span>. </li>
<li>
This allows fine-grained per-TU control without breaking the One Definition Rule (ODR). </li>
</ul>
<h4>Summary Table</h4>
<table class="doxtable">
<tr>
<th>Mode</th><th>Macro</th><th>Effect</th><th>Typical Use</th></tr>
<tr>
<td>Header-only</td><td><code>(none)</code></td><td>Emit <span class="tt">inline</span> definitions</td><td>Direct inclusion</td></tr>
<tr>
<td>Static/Shared</td><td><code>JH_HEADER_IMPL_BUILD</code></td><td>Emit non-inline strong definitions</td><td>Library implementation TU</td></tr>
<tr>
<td>Interface-only</td><td><code>JH_HEADER_NO_IMPL</code></td><td>Suppress definitions (declarations only)</td><td>Type visibility only</td></tr>
</table>
<h4>Conceptual Summary</h4>
<ul>
<li>
Each TU determines how a header behaves at compile time. </li>
<li>
The first inclusion defines the mode for that TU. </li>
<li>
Multiple TUs can coexist using different modes safely. </li>
<li>
Macros are automatically cleaned by <code>&lt;<a class="el" href="header__end_8h.html" title="Cleanup header for jh/macros/header_begin.h.">jh/macros/header_end.h</a>&gt;</code>, ensuring no cross-header contamination. </li>
</ul>
<p><em> With this pattern, a single C++ header can flexibly serve as both a header-only and a static/shared library implementation — eliminating the traditional need to maintain duplicate <code>.h</code> / <code>.cpp</code> files. </em></p>
<hr  />
 <h3>Integration with CMake and Library Packaging</h3>
<p>Dual-mode headers are designed for both in-library use and external reuse through CMake targets. This section explains how to apply them in practice. </p>
<ol>
<li>
<p class="startli"><b>Inside your own library build</b><br  />
 Define <code>JH_HEADER_IMPL_BUILD</code> before including each dual-mode header in the single implementation translation unit (TU). This causes strong, non-inline definitions to be generated and linked into the static or shared library.<br  />
 Other headers or source files in the same project can simply include those headers normally (header-only mode); header guards prevent redefinition. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>When providing your library to external users</b><br  />
 In your CMake packaging, propagate <code>JH_HEADER_NO_IMPL</code> via <code>target_compile_definitions(... INTERFACE JH_HEADER_NO_IMPL)</code>. This ensures that all consumers automatically include headers in declaration-only mode when they link your exported target.<br  />
 Consumers do not need to define any macros manually — simply linking to the correct target selects the right mode. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><b>Example CMake configuration</b><br  />
 </p><pre><code>
    add_library(jh-toolkit INTERFACE ${INCLUDE})
    </code></pre> <pre><code>
    add_library(jh-toolkit-static STATIC ${SRC})
    </code></pre> <pre><code>
    target_compile_definitions(jh-toolkit-static INTERFACE JH_HEADER_NO_IMPL)
    </code></pre> <p class="endli"></p>
</li>
<li>
<b>Resulting usage summary</b><br  />
 <ul>
<li>
<code>jh::jh-toolkit</code> → header-only mode (full inline) </li>
<li>
<code>jh::jh-toolkit-static</code> → prebuilt static object (declarations only) </li>
</ul>
This structure allows seamless interoperability between source inclusion and prebuilt linking, all from a single unified header source.  </li>
</ol>
<hr  />
 <h3>Important Note</h3>
<ul>
<li>
These two helper headers (<code><a class="el" href="header__begin_8h.html" title="Macro setup for dual-mode headers (header-only / static).">jh/macros/header_begin.h</a></code> and <code><a class="el" href="header__end_8h.html" title="Cleanup header for jh/macros/header_begin.h.">jh/macros/header_end.h</a></code>) are <b>intended to be copied directly into your own project</b>, rather than included from <code>jh-toolkit</code>. </li>
<li>
If your project already depends on <code>jh-toolkit</code>, you <b>should rename the macros</b> (e.g. <code>MYLIB_HEADER_NO_IMPL</code>) to avoid namespace pollution or conflicts. </li>
<li>
You may freely modify or rename them, as long as you keep the original license notice. </li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="header__end_8h.html" title="Cleanup header for jh/macros/header_begin.h.">jh/macros/header_end.h</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
</div> <!-- top -->
<hr class="footer"/>
<div class="footer">
    <img class="footer-logo" src="Ojing.svg" alt="Ojing"/>
    <div class="footer-text">
        JH-Toolkit v1.4.0 · Generated by Doxygen
    </div>
    <div class="footer-note">
        We primarily support embedded documentation views in IDEs (classic CLion).
        To ensure compatibility with embedded rendering, some example code in this
        documentation intentionally contains HTML entities.
        In certain cases, Doxygen does not unescape these entities correctly.
        This is a known limitation and currently has no workaround.
    </div>
</div>
</body>
</html>
