<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JH-Toolkit: include/jh/ranges/views/common.h File Reference</title>
<link rel="icon" href="Jindallae.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Oree.svg"/></td>
  <td id="projectalign">
   <div id="projectname">JH-Toolkit<span id="projectnumber">&#160;v1.4.0</span>
   </div>
   <div id="projectbrief">An engineering-oriented C++20 toolkit with duck-typed concepts, static design, async coroutines, and semantic containers — header-only, RTTI-free, and concurrency-friendly.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('common_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">common.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A unified <code>common</code> view adaptor for both <code>std::ranges::range</code> and <code><a class="el" href="conceptjh_1_1concepts_1_1sequence.html" title="Concept that checks whether a type provides at least const (non-destructive) iteration.">jh::concepts::sequence</a></code> types.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;ranges&gt;</code><br />
<code>#include &quot;<a class="el" href="">jh/conceptual/sequence.h</a>&quot;</code><br />
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1d2e14ae8f00eccc7193131f48893412" id="r_a1d2e14ae8f00eccc7193131f48893412"><td class="memItemLeft">constexpr detail::common_fn&#160;</td><td class="memItemRight"><a class="el" href="namespacejh_1_1ranges_1_1views.html#a1d2e14ae8f00eccc7193131f48893412">jh::ranges::views::common</a> {}</td></tr>
<tr class="memdesc:a1d2e14ae8f00eccc7193131f48893412"><td class="mdescLeft">&#160;</td><td class="mdescRight">User-facing <code>common</code> adaptor instance.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A unified <code>common</code> view adaptor for both <code>std::ranges::range</code> and <code><a class="el" href="conceptjh_1_1concepts_1_1sequence.html" title="Concept that checks whether a type provides at least const (non-destructive) iteration.">jh::concepts::sequence</a></code> types. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2025 JeongHan-Bae &lt;mastropseudo@gmail.com&gt; <br  />
 Licensed under the Apache License, Version 2.0 (the "License"); <br  />
 you may not use this file except in compliance with the License.<br  />
 You may obtain a copy of the License at<br  />
 <br  />
 <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a><br  />
 <br  />
 Unless required by applicable law or agreed to in writing, software<br  />
 distributed under the License is distributed on an "AS IS" BASIS,<br  />
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br  />
 See the License for the specific language governing permissions and<br  />
 limitations under the License.<br  />
 <br  />
 Full license: <a href="https://github.com/JeongHan-Bae/JH-Toolkit?tab=Apache-2.0-1-ov-file#readme">GitHub</a></dd></dl>
<dl class="section author"><dt>Author</dt><dd>JeongHan-Bae <a href="#" onclick="location.href='mai'+'lto:'+'mas'+'tr'+'ops'+'eu'+'do@'+'gm'+'ail'+'.c'+'om'; return false;">mastr<span class="obfuscator">.nosp@m.</span>opse<span class="obfuscator">.nosp@m.</span>udo@g<span class="obfuscator">.nosp@m.</span>mail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<p>This header provides <code><a class="el" href="namespacejh_1_1ranges_1_1views.html#a1d2e14ae8f00eccc7193131f48893412" title="User-facing common adaptor instance.">jh::ranges::views::common</a></code> — a lightweight and compatible wrapper around the standard <code>std::views::common</code> adaptor (C++20). It extends the adaptor to support any type modeling <code><a class="el" href="conceptjh_1_1concepts_1_1sequence.html" title="Concept that checks whether a type provides at least const (non-destructive) iteration.">jh::concepts::sequence</a></code>, enabling third-party or user-defined sequence types to interoperate naturally with the standard range pipeline. </p>
<p>The adaptor normalizes iterator/sentinel categories without altering data ownership semantics. For standard ranges, it behaves identically to <code>std::views::common</code>. For types satisfying <code><a class="el" href="conceptjh_1_1concepts_1_1sequence.html" title="Concept that checks whether a type provides at least const (non-destructive) iteration.">jh::concepts::sequence</a></code>, it performs a promotion through <code><a class="el" href="namespacejh.html#a58aa95803840fb814bf92dd4954fb44c" title="Converts a generator factory (lambda or function) into a repeatable range.">jh::to_range()</a></code> to obtain a valid range representation. Non-copyable or non-movable sequences are automatically proxied via <code>std::ranges::subrange</code> when required. </p>
<p><b>Behavior summary:</b></p>
<ul>
<li>
If the source models <code><a class="el" href="conceptjh_1_1concepts_1_1sequence.html" title="Concept that checks whether a type provides at least const (non-destructive) iteration.">jh::concepts::sequence</a></code>, it is promoted using <code><a class="el" href="namespacejh.html#a58aa95803840fb814bf92dd4954fb44c" title="Converts a generator factory (lambda or function) into a repeatable range.">jh::to_range()</a></code> and wrapped by <code>std::ranges::common_view</code>. </li>
<li>
If the source models only <code>std::ranges::range</code>, the adaptor forwards to <code>std::views::common()</code>. </li>
<li>
Existing <code>common_range</code> types remain unchanged, except when proxied for non-copyable sources. </li>
</ul>
<p><b>Usage examples:</b></p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacejh_1_1ranges_1_1views.html">jh::ranges::views</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 1. Standard range usage</span></div>
<div class="line"><span class="keyword">auto</span> v1 = std::views::iota(0, 5) | <a class="code hl_variable" href="namespacejh_1_1ranges_1_1views.html#a1d2e14ae8f00eccc7193131f48893412">common</a>();</div>
<div class="line"><span class="comment">// equivalent to std::views::common(iota(...))</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// 2. A user-defined type modeling jh::concepts::sequence</span></div>
<div class="line">MySequence seq = ...;        <span class="comment">// satisfies jh::concepts::sequence</span></div>
<div class="line"><span class="keyword">auto</span> v2 = seq | <a class="code hl_variable" href="namespacejh_1_1ranges_1_1views.html#a1d2e14ae8f00eccc7193131f48893412">common</a>();</div>
<div class="line"><span class="comment">// promoted through jh::to_range() and std::views::common()</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// 3. A non-copyable but reentrant range</span></div>
<div class="line"><a class="code hl_class" href="classjh_1_1runtime__arr.html">jh::runtime_arr&lt;int&gt;</a> arr{1, 2, 3};</div>
<div class="line"><span class="keyword">auto</span> v3 = arr | <a class="code hl_variable" href="namespacejh_1_1ranges_1_1views.html#a1d2e14ae8f00eccc7193131f48893412">common</a>();</div>
<div class="line"><span class="comment">// already a common_range; produces a subrange proxy if needed</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// 4. Composed pipeline example</span></div>
<div class="line"><span class="keyword">auto</span> combined =</div>
<div class="line">    ids | <a class="code hl_variable" href="namespacejh_1_1ranges_1_1views.html#ad8bed1059cdf6c1295582749bd03983c">enumerate</a>(100)</div>
<div class="line">        | <a class="code hl_variable" href="namespacejh_1_1ranges_1_1views.html#a776fee431c8d3c1f344995e06d812cb3">zip_pipe</a>(names)</div>
<div class="line">        | <a class="code hl_variable" href="namespacejh_1_1ranges_1_1views.html#aa3ffc1f643e56fb708c1b5ca2b21c479">flatten</a>()</div>
<div class="line">        | <a class="code hl_variable" href="namespacejh_1_1ranges_1_1views.html#a1d2e14ae8f00eccc7193131f48893412">common</a>();</div>
<div class="ttc" id="aclassjh_1_1runtime__arr_html"><div class="ttname"><a href="classjh_1_1runtime__arr.html">jh::runtime_arr</a></div><div class="ttdoc">A move-only, fixed-capacity array with runtime-determined length and RAII-based ownership.</div><div class="ttdef"><b>Definition</b> runtime_arr.h:365</div></div>
<div class="ttc" id="anamespacejh_1_1ranges_1_1views_html"><div class="ttname"><a href="namespacejh_1_1ranges_1_1views.html">jh::ranges::views</a></div><div class="ttdef"><b>Definition</b> common.h:99</div></div>
<div class="ttc" id="anamespacejh_1_1ranges_1_1views_html_a1d2e14ae8f00eccc7193131f48893412"><div class="ttname"><a href="namespacejh_1_1ranges_1_1views.html#a1d2e14ae8f00eccc7193131f48893412">jh::ranges::views::common</a></div><div class="ttdeci">constexpr detail::common_fn common</div><div class="ttdoc">User-facing common adaptor instance.</div><div class="ttdef"><b>Definition</b> common.h:270</div></div>
<div class="ttc" id="anamespacejh_1_1ranges_1_1views_html_a776fee431c8d3c1f344995e06d812cb3"><div class="ttname"><a href="namespacejh_1_1ranges_1_1views.html#a776fee431c8d3c1f344995e06d812cb3">jh::ranges::views::zip_pipe</a></div><div class="ttdeci">constexpr detail::zip_pipe_fn zip_pipe</div><div class="ttdoc">Extended multi-argument zip adaptor for pipe syntax.</div><div class="ttdef"><b>Definition</b> zip.h:317</div></div>
<div class="ttc" id="anamespacejh_1_1ranges_1_1views_html_aa3ffc1f643e56fb708c1b5ca2b21c479"><div class="ttname"><a href="namespacejh_1_1ranges_1_1views.html#aa3ffc1f643e56fb708c1b5ca2b21c479">jh::ranges::views::flatten</a></div><div class="ttdeci">constexpr detail::flatten_fn flatten</div><div class="ttdoc">User-facing flatten adaptor.</div><div class="ttdef"><b>Definition</b> flatten.h:255</div></div>
<div class="ttc" id="anamespacejh_1_1ranges_1_1views_html_ad8bed1059cdf6c1295582749bd03983c"><div class="ttname"><a href="namespacejh_1_1ranges_1_1views.html#ad8bed1059cdf6c1295582749bd03983c">jh::ranges::views::enumerate</a></div><div class="ttdeci">constexpr detail::enumerate_fn enumerate</div><div class="ttdoc">The user-facing enumerate adaptor.</div><div class="ttdef"><b>Definition</b> enumerate.h:149</div></div>
</div><!-- fragment --><p><b>Notes:</b></p>
<ul>
<li>
Applying <code>common()</code> to a temporary object results in a dangling view. Always ensure the source object outlives the resulting view. </li>
<li>
If the input already models <code>std::ranges::common_range</code>, <code>common()</code> performs no semantic change; it may return a <code>subrange</code> proxy for non-copyable or non-movable sources. </li>
<li>
For consuming (single-pass) ranges, the adaptor directly invokes <code>std::views::common()</code>. </li>
</ul>
<dl class="section version"><dt>Version</dt><dd><pre>1.3.x</pre> </dd></dl>
<dl class="section date"><dt>Date</dt><dd><pre>2025</pre> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
</div> <!-- top -->
<hr class="footer"/>
<div class="footer">
    <img class="footer-logo" src="Ojing.svg" alt="Ojing"/>
    <div class="footer-text">
        JH-Toolkit v1.4.0 · Generated by Doxygen
    </div>
    <div class="footer-note">
        We primarily support embedded documentation views in IDEs (classic CLion).
        To ensure compatibility with embedded rendering, some example code in this
        documentation intentionally contains HTML entities.
        In certain cases, Doxygen does not unescape these entities correctly.
        This is a known limitation and currently has no workaround.
    </div>
</div>
</body>
</html>
